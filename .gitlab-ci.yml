---
before_script:
   - cd /Users/plumbis/vagrant/interop-2016/

stages:
   - lint
   - behave
   - cleanup

lint:
   stage: lint
   script:
      - bash linter.sh

launch_lab:
   stage: behave
   only:
      - master
   script:
      - cd /Users/plumbis/vagrant/interop-2016/validation
      - vagrant destroy -f
      - vagrant up --color
      - sleep 10
      - behave --force-color
      - sleep 10

flush_vagrant:
   stage: cleanup
   only:
      - master
   script:
      - vagrant destroy -f
